<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Federated Learning Server</title>
</head>
<body>
    <h1>Federated Learning Server</h1>
    <h2>Connected Clients</h2>
    <ul>
        {% for client_id, info in clients.items() %}
            <li>{{ client_id }} (Port: {{ info.port }}, Status: {{ info.status }})</li>
        {% endfor %}
    </ul>
    <button onclick="startTraining()">Start Training</button>
    
    <h2>Global Model Metrics</h2>
    <pre id="global-metrics">
        {% if metrics %}
            loss: {{ metrics.loss }} - accuracy: {{ metrics.accuracy }} - val_loss: {{ metrics.val_loss }} - val_accuracy: {{ metrics.val_accuracy }}
        {% else %}
            No global model metrics available yet.
        {% endif %}
    </pre>

    <script>
        function startTraining() {
            fetch('/start_training', { method: 'POST' })
                .then(response => response.json())
                .then(data => {
                    alert(data.message);
                    setTimeout(() => location.reload(), 2000); // Refresh after a delay
                });
        }
    </script>
</body>
</html>
